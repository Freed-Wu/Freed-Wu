# Hook {{{1 #
set -g @plugin imomaliev/tmux-peacock
# 1}}} Hook #

# Default {{{1 #
set -g prefix C-q
set -gu prefix2
set -g mouse on
set -g default-terminal tmux-256color
set -g history-file ~/.cache/tmux.conf
set -g word-separators ' -_@'
set -g status-position top
set -g renumber-windows on
set -g set-titles on
set -g set-titles-string "#S #I #W#{session_alerts}"
set -g monitor-activity on
set -g base-index 1
set -g pane-base-index 1
bind 0 select-window -t :=10

set -g @plugin tmux-plugins/tmux-sensible
set -g @plugin lljbash/tmux-update-display
# 1}}} Default #

# PluginManage {{{1 #
if "[[ ! -d ~/.config/tmux/plugins/tpm ]]" {
	run 'git clone https://github.com/tmux-plugins/tpm ~/.config/tmux/plugins/tpm && ~/.config/tmux/plugins/tpm/bin/install_plugins'
}
set -g @plugin tmux-plugins/tpm
# 1}}} PluginManage #

# StatusLine {{{1 #
set -g @plugin tmux-plugins/tmux-prefix-highlight
set -g @plugin olimorris/tmux-pomodoro-plus
set -g @pomodoro_on '#[fg=$text_red]ğŸ…'
set -g @pomodoro_complete '#[fg=$text_green]ğŸ…'
set -g @pomodoro_start C-a
set -g @pomodoro_cancel M-a
# if-shell cannot work for tpm
# darwin
# set -g @plugin imomaliev/tmux-keyboard-layout
set -g @route_to_ping github.com
set -g @plugin tmux-plugins/tmux-online-status
set -g @plugin tmux-plugins/tmux-net-speed
set -g @net_speed_format "â†“%8sîƒƒâ†‘%8s"
set -g @plugin tmux-plugins/tmux-cpu
set -g @plugin tmux-plugins/tmux-battery
set -g @plugin Brutuski/tmux-ticker
set -g @ticker_crypto BTC-USD
set -g @plugin aaronpowell/tmux-weather
set -g status-left-length 1000
set -g status-right-length 1000
set -g status-left \
"#[fg=#fffafa,bg=#3a3a3a]#S\
#[fg=#3a3a3a,bg=#{TMUX_PEACOCK_SESSION_COLOUR},nobold]îƒ€"
set -g window-status-separator ''
set -g window-status-current-format \
"#[fg=#{TMUX_PEACOCK_SESSION_COLOUR},bg=#ffb86c]îƒ€#[fg=#3a3a3a,bold]#I #W\
#{?window_marked_flag,ğŸ˜ƒ,}#{?window_zoomed_flag,ğŸ”,}#{?window_linked,ğŸ ,}\
#{?window_bigger,ğŸ”¥,}\
#[fg=#ffb86c,bg=#{TMUX_PEACOCK_SESSION_COLOUR},nobold]îƒ€"
set -g window-status-format \
"#[fg=#3a3a3a,bg=#{TMUX_PEACOCK_SESSION_COLOUR},noreverse]#I #W\
#{?window_marked_flag,ğŸ˜ƒ,}#{?window_zoomed_flag,ğŸ”,}#{?window_linked,ğŸ ,}\
#{?window_last_flag,ğŸ‘“,}#{?window_bell_flag,ğŸ””,}#{?window_silence_flag,ğŸ,} \
#[fg=#3a3a3a,bg=#ffb86c]"
set -g status-right \
"#[fg=colour04]îƒ‚#{prefix_highlight}\
#[fg=#ffff00,bg=colour04]îƒ‚#[fg=#080808,bg=#ffff00]\
#{pomodoro_status}\
#[fg=#9370db,bg=#ffff00]îƒ‚#[fg=#ff0000,bg=#9370db]\
#{online_status}îƒƒ#{net_speed}\
#[fg=#b34a47,bg=#9370db]îƒ‚#[fg=#f8f8f8,bg=#b34a47]\
#{battery_icon_status}#{battery_remain}îƒƒ\
#{battery_color_status_fg}#[bg=#b34a47]#{battery_icon_charge}\
#{battery_percentage}\
#[fg=#87ceeb,bg=#b34a47]îƒ‚#[fg=#121212,bg=#87ceeb]\
%Rîƒƒ%dîƒƒ%b"
# average load is too large
# #{cpu_fg_color}#{cpu_icon}#{cpu_percentage} \
#{ram_fg_color}#{ram_icon}#{ram_percentage} \
#{cpu_temp_fg_color}#{cpu_temp_icon}#{cpu_temp}îƒƒ\
#{gpu_fg_color}#{gpu_icon}#{gpu_percentage} \
#{gram_fg_color}#{gram_icon}#{gram_percentage} \
#{gpu_temp_fg_color}#{gpu_temp_icon}#{gpu_temp}\
#{ticker_crypto}\
#{forecast}\
# 1}}} StatusLine #

# Hotkey {{{1 #
bind -Tcopy-mode-vi r clear-history
bind -Tcopy-mode-vi = capture-pane
bind -Tcopy-mode-vi v send-keys -X begin-selection
bind -Tcopy-mode-vi C-v send-keys -X rectangle-toggle
bind -Tcopy-mode-vi C send-keys -X copy-end-of-line
bind -Tcopy-mode-vi u send-keys -X halfpage-up
bind -Tcopy-mode-vi d send-keys -X halfpage-down
bind -Tcopy-mode-vi U send-keys -X page-up
bind -Tcopy-mode-vi D send-keys -X page-down
bind -Tcopy-mode-vi i send-keys -X append-selection-and-cancel
bind -Tcopy-mode-vi I send-keys -X append-selection-and-cancel
bind -Tcopy-mode-vi a send-keys -X append-selection-and-cancel
bind ` last-window
bind T clock
bind C-c new-session
bind C-f command-prompt -p find-session 'switch-client -t %%'

set -g @plugin tmux-plugins/tmux-pain-control
set -g @plugin tmux-plugins/tmux-sessionist
set -g @plugin tmux-plugins/tmux-logging
set -g @plugin tmux-plugins/tmux-yank
set -g @yank_action copy-pipe
set -g @plugin tmux-plugins/tmux-resurrect
set -g @resurrect-strategy-vim session
set -g @resurrect-strategy-nvim session
set -g @resurrect-capture-pane-contents on
set -g @plugin tmux-plugins/tmux-open
set -g @open x
set -g @open-O https://www.bing.com/search?q=
# 1}}} Hotkey #

# FileExplore {{{1 #
# load early because it need more time
set -g @plugin tmux-plugins/tmux-sidebar
set -g @sidebar-tree C-t
set -g @sidebar-tree-command 'exa -T --icons --color always'
# 1}}} FileExplore #

# Move {{{1 #
set -g @plugin IngoMeyer441/tmux-easy-motion
# 1}}} Move #

# Filter {{{1 #
set -g @plugin laktak/extrakto
set -g @plugin kevinhwang91/fzf-tmux-script
set-hook -g pane-focus-in[10] \
"run -b 'bash ~/.config/tmux/plugins/fzf-tmux-script/panes/fzf-panes.tmux update_mru_pane_ids'"
bind w run -b 'bash ~/.config/tmux/plugins/fzf-tmux-script/panes/fzf-panes.tmux new_window'
# set -g @plugin junegunn/tmux-fzf-maccy
# 1}}} Filter #

# Function {{{1 #
set -g @plugin knakayama/tmux-man
set -g @man-key a
set -g @man-shell-interactive on
# 1}}} Function #

# SessionManage {{{1 #
set -g @plugin tmux-plugins/tmux-continuum
# 1}}} SessionManage #

run ~/.config/tmux/plugins/tpm/tpm
